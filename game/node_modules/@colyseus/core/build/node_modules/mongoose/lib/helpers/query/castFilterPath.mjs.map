{"version":3,"file":"castFilterPath.mjs","sources":["../../../../../../../../node_modules/mongoose/lib/helpers/query/castFilterPath.js"],"sourcesContent":["'use strict';\n\nconst isOperator = require('./isOperator');\n\nmodule.exports = function castFilterPath(query, schematype, val) {\n  const ctx = query;\n  const any$conditionals = Object.keys(val).some(isOperator);\n\n  if (!any$conditionals) {\n    return schematype.castForQueryWrapper({\n      val: val,\n      context: ctx\n    });\n  }\n\n  const ks = Object.keys(val);\n\n  let k = ks.length;\n\n  while (k--) {\n    const $cond = ks[k];\n    const nested = val[$cond];\n\n    if ($cond === '$not') {\n      if (nested && schematype && !schematype.caster) {\n        const _keys = Object.keys(nested);\n        if (_keys.length && isOperator(_keys[0])) {\n          for (const key of Object.keys(nested)) {\n            nested[key] = schematype.castForQueryWrapper({\n              $conditional: key,\n              val: nested[key],\n              context: ctx\n            });\n          }\n        } else {\n          val[$cond] = schematype.castForQueryWrapper({\n            $conditional: $cond,\n            val: nested,\n            context: ctx\n          });\n        }\n        continue;\n      }\n      // cast(schematype.caster ? schematype.caster.schema : schema, nested, options, context);\n    } else {\n      val[$cond] = schematype.castForQueryWrapper({\n        $conditional: $cond,\n        val: nested,\n        context: ctx\n      });\n    }\n  }\n\n  return val;\n};"],"names":[],"mappings":";;kBAIc,GAAG,SAAS,cAAc,CAAC,KAAK,EAAE,UAAU,EAAE,GAAG,EAAE;AACjE,EAAE,MAAM,GAAG,GAAG,KAAK,CAAC;AACpB,EAAE,MAAM,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC7D;AACA,EAAE,IAAI,CAAC,gBAAgB,EAAE;AACzB,IAAI,OAAO,UAAU,CAAC,mBAAmB,CAAC;AAC1C,MAAM,GAAG,EAAE,GAAG;AACd,MAAM,OAAO,EAAE,GAAG;AAClB,KAAK,CAAC,CAAC;AACP,GAAG;AACH;AACA,EAAE,MAAM,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC9B;AACA,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC;AACpB;AACA,EAAE,OAAO,CAAC,EAAE,EAAE;AACd,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACxB,IAAI,MAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC;AAC9B;AACA,IAAI,IAAI,KAAK,KAAK,MAAM,EAAE;AAC1B,MAAM,IAAI,MAAM,IAAI,UAAU,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;AACtD,QAAQ,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC1C,QAAQ,IAAI,KAAK,CAAC,MAAM,IAAI,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;AAClD,UAAU,KAAK,MAAM,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;AACjD,YAAY,MAAM,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC,mBAAmB,CAAC;AACzD,cAAc,YAAY,EAAE,GAAG;AAC/B,cAAc,GAAG,EAAE,MAAM,CAAC,GAAG,CAAC;AAC9B,cAAc,OAAO,EAAE,GAAG;AAC1B,aAAa,CAAC,CAAC;AACf,WAAW;AACX,SAAS,MAAM;AACf,UAAU,GAAG,CAAC,KAAK,CAAC,GAAG,UAAU,CAAC,mBAAmB,CAAC;AACtD,YAAY,YAAY,EAAE,KAAK;AAC/B,YAAY,GAAG,EAAE,MAAM;AACvB,YAAY,OAAO,EAAE,GAAG;AACxB,WAAW,CAAC,CAAC;AACb,SAAS;AACT,QAAQ,SAAS;AACjB,OAAO;AACP;AACA,KAAK,MAAM;AACX,MAAM,GAAG,CAAC,KAAK,CAAC,GAAG,UAAU,CAAC,mBAAmB,CAAC;AAClD,QAAQ,YAAY,EAAE,KAAK;AAC3B,QAAQ,GAAG,EAAE,MAAM;AACnB,QAAQ,OAAO,EAAE,GAAG;AACpB,OAAO,CAAC,CAAC;AACT,KAAK;AACL,GAAG;AACH;AACA,EAAE,OAAO,GAAG,CAAC;AACb;;;;"}
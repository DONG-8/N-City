{"version":3,"file":"updatedPathsByArrayFilter.mjs","sources":["../../../../../../../../node_modules/mongoose/lib/helpers/update/updatedPathsByArrayFilter.js"],"sourcesContent":["'use strict';\n\nconst modifiedPaths = require('./modifiedPaths');\n\nmodule.exports = function updatedPathsByArrayFilter(update) {\n  const updatedPaths = modifiedPaths(update);\n\n  return Object.keys(updatedPaths).reduce((cur, path) => {\n    const matches = path.match(/\\$\\[[^\\]]+\\]/g);\n    if (matches == null) {\n      return cur;\n    }\n    for (const match of matches) {\n      const firstMatch = path.indexOf(match);\n      if (firstMatch !== path.lastIndexOf(match)) {\n        throw new Error(`Path '${path}' contains the same array filter multiple times`);\n      }\n      cur[match.substring(2, match.length - 1)] = path.\n        substr(0, firstMatch - 1).\n        replace(/\\$\\[[^\\]]+\\]/g, '0');\n    }\n    return cur;\n  }, {});\n};"],"names":[],"mappings":";;6BAIc,GAAG,SAAS,yBAAyB,CAAC,MAAM,EAAE;AAC5D,EAAE,MAAM,YAAY,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;AAC7C;AACA,EAAE,OAAO,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK;AACzD,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;AAChD,IAAI,IAAI,OAAO,IAAI,IAAI,EAAE;AACzB,MAAM,OAAO,GAAG,CAAC;AACjB,KAAK;AACL,IAAI,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE;AACjC,MAAM,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC7C,MAAM,IAAI,UAAU,KAAK,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE;AAClD,QAAQ,MAAM,IAAI,KAAK,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,+CAA+C,CAAC,CAAC,CAAC;AACxF,OAAO;AACP,MAAM,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI;AACtD,QAAQ,MAAM,CAAC,CAAC,EAAE,UAAU,GAAG,CAAC,CAAC;AACjC,QAAQ,OAAO,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;AACtC,KAAK;AACL,IAAI,OAAO,GAAG,CAAC;AACf,GAAG,EAAE,EAAE,CAAC,CAAC;AACT;;;;"}
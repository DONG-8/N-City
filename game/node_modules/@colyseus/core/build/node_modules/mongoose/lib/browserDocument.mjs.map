{"version":3,"file":"browserDocument.mjs","sources":["../../../../../../node_modules/mongoose/lib/browserDocument.js"],"sourcesContent":["/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst NodeJSDocument = require('./document');\nconst EventEmitter = require('events').EventEmitter;\nconst MongooseError = require('./error/index');\nconst Schema = require('./schema');\nconst ObjectId = require('./types/objectid');\nconst ValidationError = MongooseError.ValidationError;\nconst applyHooks = require('./helpers/model/applyHooks');\nconst isObject = require('./helpers/isObject');\n\n/**\n * Document constructor.\n *\n * @param {Object} obj the values to set\n * @param {Object} [fields] optional object containing the fields which were selected in the query returning this document and any populated paths data\n * @param {Boolean} [skipId] bool, should we auto create an ObjectId _id\n * @inherits NodeJS EventEmitter http://nodejs.org/api/events.html#events_class_events_eventemitter\n * @event `init`: Emitted on a document after it has was retrieved from the db and fully hydrated by Mongoose.\n * @event `save`: Emitted when the document is successfully saved\n * @api private\n */\n\nfunction Document(obj, schema, fields, skipId, skipInit) {\n  if (!(this instanceof Document)) {\n    return new Document(obj, schema, fields, skipId, skipInit);\n  }\n\n  if (isObject(schema) && !schema.instanceOfSchema) {\n    schema = new Schema(schema);\n  }\n\n  // When creating EmbeddedDocument, it already has the schema and he doesn't need the _id\n  schema = this.schema || schema;\n\n  // Generate ObjectId if it is missing, but it requires a scheme\n  if (!this.schema && schema.options._id) {\n    obj = obj || {};\n\n    if (obj._id === undefined) {\n      obj._id = new ObjectId();\n    }\n  }\n\n  if (!schema) {\n    throw new MongooseError.MissingSchemaError();\n  }\n\n  this.$__setSchema(schema);\n\n  NodeJSDocument.call(this, obj, fields, skipId, skipInit);\n\n  applyHooks(this, schema, { decorateDoc: true });\n\n  // apply methods\n  for (const m in schema.methods) {\n    this[m] = schema.methods[m];\n  }\n  // apply statics\n  for (const s in schema.statics) {\n    this[s] = schema.statics[s];\n  }\n}\n\n/*!\n * Inherit from the NodeJS document\n */\n\nDocument.prototype = Object.create(NodeJSDocument.prototype);\nDocument.prototype.constructor = Document;\n\n/*!\n * ignore\n */\n\nDocument.events = new EventEmitter();\n\n/*!\n * Browser doc exposes the event emitter API\n */\n\nDocument.$emitter = new EventEmitter();\n\n['on', 'once', 'emit', 'listeners', 'removeListener', 'setMaxListeners',\n  'removeAllListeners', 'addListener'].forEach(function(emitterFn) {\n  Document[emitterFn] = function() {\n    return Document.$emitter[emitterFn].apply(Document.$emitter, arguments);\n  };\n});\n\n/*!\n * Module exports.\n */\n\nDocument.ValidationError = ValidationError;\nmodule.exports = exports = Document;\n"],"names":["MongooseError","schema","Schema","ObjectId","NodeJSDocument","applyHooks"],"mappings":"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"}
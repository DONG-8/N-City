{"version":3,"file":"castBulkWrite.js","sources":["../../../../../../../../node_modules/mongoose/lib/helpers/model/castBulkWrite.js"],"sourcesContent":["'use strict';\n\nconst getDiscriminatorByValue = require('../../helpers/discriminator/getDiscriminatorByValue');\nconst applyTimestampsToChildren = require('../update/applyTimestampsToChildren');\nconst applyTimestampsToUpdate = require('../update/applyTimestampsToUpdate');\nconst cast = require('../../cast');\nconst castUpdate = require('../query/castUpdate');\nconst setDefaultsOnInsert = require('../setDefaultsOnInsert');\n\n/*!\n * Given a model and a bulkWrite op, return a thunk that handles casting and\n * validating the individual op.\n */\n\nmodule.exports = function castBulkWrite(originalModel, op, options) {\n  const now = originalModel.base.now();\n\n  if (op['insertOne']) {\n    return (callback) => {\n      const model = decideModelByObject(originalModel, op['insertOne']['document']);\n\n      const doc = new model(op['insertOne']['document']);\n      if (model.schema.options.timestamps) {\n        doc.initializeTimestamps();\n      }\n      if (options.session != null) {\n        doc.$session(options.session);\n      }\n      op['insertOne']['document'] = doc;\n      op['insertOne']['document'].validate({ __noPromise: true }, function(error) {\n        if (error) {\n          return callback(error, null);\n        }\n        callback(null);\n      });\n    };\n  } else if (op['updateOne']) {\n    return (callback) => {\n      try {\n        if (!op['updateOne']['filter']) {\n          throw new Error('Must provide a filter object.');\n        }\n        if (!op['updateOne']['update']) {\n          throw new Error('Must provide an update object.');\n        }\n\n        const model = decideModelByObject(originalModel, op['updateOne']['filter']);\n        const schema = model.schema;\n        const strict = options.strict != null ? options.strict : model.schema.options.strict;\n\n        _addDiscriminatorToObject(schema, op['updateOne']['filter']);\n\n        if (model.schema.$timestamps != null && op['updateOne'].timestamps !== false) {\n          const createdAt = model.schema.$timestamps.createdAt;\n          const updatedAt = model.schema.$timestamps.updatedAt;\n          applyTimestampsToUpdate(now, createdAt, updatedAt, op['updateOne']['update'], {});\n        }\n\n        applyTimestampsToChildren(now, op['updateOne']['update'], model.schema);\n\n        if (op['updateOne'].setDefaultsOnInsert) {\n          setDefaultsOnInsert(op['updateOne']['filter'], model.schema, op['updateOne']['update'], {\n            setDefaultsOnInsert: true,\n            upsert: op['updateOne'].upsert\n          });\n        }\n\n        op['updateOne']['filter'] = cast(model.schema, op['updateOne']['filter'], {\n          strict: strict,\n          upsert: op['updateOne'].upsert\n        });\n\n        op['updateOne']['update'] = castUpdate(model.schema, op['updateOne']['update'], {\n          strict: strict,\n          overwrite: false,\n          upsert: op['updateOne'].upsert\n        }, model, op['updateOne']['filter']);\n      } catch (error) {\n        return callback(error, null);\n      }\n\n      callback(null);\n    };\n  } else if (op['updateMany']) {\n    return (callback) => {\n      try {\n        if (!op['updateMany']['filter']) {\n          throw new Error('Must provide a filter object.');\n        }\n        if (!op['updateMany']['update']) {\n          throw new Error('Must provide an update object.');\n        }\n\n        const model = decideModelByObject(originalModel, op['updateMany']['filter']);\n        const schema = model.schema;\n        const strict = options.strict != null ? options.strict : model.schema.options.strict;\n\n        if (op['updateMany'].setDefaultsOnInsert) {\n          setDefaultsOnInsert(op['updateMany']['filter'], model.schema, op['updateMany']['update'], {\n            setDefaultsOnInsert: true,\n            upsert: op['updateMany'].upsert\n          });\n        }\n\n        if (model.schema.$timestamps != null && op['updateMany'].timestamps !== false) {\n          const createdAt = model.schema.$timestamps.createdAt;\n          const updatedAt = model.schema.$timestamps.updatedAt;\n          applyTimestampsToUpdate(now, createdAt, updatedAt, op['updateMany']['update'], {});\n        }\n\n        applyTimestampsToChildren(now, op['updateMany']['update'], model.schema);\n\n        _addDiscriminatorToObject(schema, op['updateMany']['filter']);\n\n        op['updateMany']['filter'] = cast(model.schema, op['updateMany']['filter'], {\n          strict: strict,\n          upsert: op['updateMany'].upsert\n        });\n\n        op['updateMany']['update'] = castUpdate(model.schema, op['updateMany']['update'], {\n          strict: strict,\n          overwrite: false,\n          upsert: op['updateMany'].upsert\n        }, model, op['updateMany']['filter']);\n\n      } catch (error) {\n        return callback(error, null);\n      }\n\n      callback(null);\n    };\n  } else if (op['replaceOne']) {\n    return (callback) => {\n      const model = decideModelByObject(originalModel, op['replaceOne']['filter']);\n      const schema = model.schema;\n      const strict = options.strict != null ? options.strict : model.schema.options.strict;\n\n      _addDiscriminatorToObject(schema, op['replaceOne']['filter']);\n      try {\n        op['replaceOne']['filter'] = cast(model.schema, op['replaceOne']['filter'], {\n          strict: strict,\n          upsert: op['replaceOne'].upsert\n        });\n      } catch (error) {\n        return callback(error, null);\n      }\n\n      // set `skipId`, otherwise we get \"_id field cannot be changed\"\n      const doc = new model(op['replaceOne']['replacement'], strict, true);\n      if (model.schema.options.timestamps) {\n        doc.initializeTimestamps();\n      }\n      if (options.session != null) {\n        doc.$session(options.session);\n      }\n      op['replaceOne']['replacement'] = doc;\n\n      op['replaceOne']['replacement'].validate({ __noPromise: true }, function(error) {\n        if (error) {\n          return callback(error, null);\n        }\n        op['replaceOne']['replacement'] = op['replaceOne']['replacement'].toBSON();\n        callback(null);\n      });\n    };\n  } else if (op['deleteOne']) {\n    return (callback) => {\n      const model = decideModelByObject(originalModel, op['deleteOne']['filter']);\n      const schema = model.schema;\n\n      _addDiscriminatorToObject(schema, op['deleteOne']['filter']);\n\n      try {\n        op['deleteOne']['filter'] = cast(model.schema,\n          op['deleteOne']['filter']);\n      } catch (error) {\n        return callback(error, null);\n      }\n\n      callback(null);\n    };\n  } else if (op['deleteMany']) {\n    return (callback) => {\n      const model = decideModelByObject(originalModel, op['deleteMany']['filter']);\n      const schema = model.schema;\n\n      _addDiscriminatorToObject(schema, op['deleteMany']['filter']);\n\n      try {\n        op['deleteMany']['filter'] = cast(model.schema,\n          op['deleteMany']['filter']);\n      } catch (error) {\n        return callback(error, null);\n      }\n\n      callback(null);\n    };\n  } else {\n    return (callback) => {\n      callback(new Error('Invalid op passed to `bulkWrite()`'), null);\n    };\n  }\n};\n\nfunction _addDiscriminatorToObject(schema, obj) {\n  if (schema == null) {\n    return;\n  }\n  if (schema.discriminatorMapping && !schema.discriminatorMapping.isRoot) {\n    obj[schema.discriminatorMapping.key] = schema.discriminatorMapping.value;\n  }\n}\n\n/*!\n * gets discriminator model if discriminator key is present in object\n */\n\nfunction decideModelByObject(model, object) {\n  const discriminatorKey = model.schema.options.discriminatorKey;\n  if (object != null && object.hasOwnProperty(discriminatorKey)) {\n    model = getDiscriminatorByValue(model.discriminators, object[discriminatorKey]) || model;\n  }\n  return model;\n}\n"],"names":[],"mappings":"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"}
{"version":3,"file":"validateBeforeSave.mjs","sources":["../../../../../../../node_modules/mongoose/lib/plugins/validateBeforeSave.js"],"sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = function(schema) {\n  const unshift = true;\n  schema.pre('save', false, function validateBeforeSave(next, options) {\n    const _this = this;\n    // Nested docs have their own presave\n    if (this.ownerDocument) {\n      return next();\n    }\n\n    const hasValidateBeforeSaveOption = options &&\n        (typeof options === 'object') &&\n        ('validateBeforeSave' in options);\n\n    let shouldValidate;\n    if (hasValidateBeforeSaveOption) {\n      shouldValidate = !!options.validateBeforeSave;\n    } else {\n      shouldValidate = this.$__schema.options.validateBeforeSave;\n    }\n\n    // Validate\n    if (shouldValidate) {\n      const hasValidateModifiedOnlyOption = options &&\n          (typeof options === 'object') &&\n          ('validateModifiedOnly' in options);\n      const validateOptions = hasValidateModifiedOnlyOption ?\n        { validateModifiedOnly: options.validateModifiedOnly } :\n        null;\n      this.validate(validateOptions, function(error) {\n        return _this.$__schema.s.hooks.execPost('save:error', _this, [_this], { error: error }, function(error) {\n          _this.$op = 'save';\n          next(error);\n        });\n      });\n    } else {\n      next();\n    }\n  }, null, unshift);\n};\n"],"names":[],"mappings":"AAEA;AACA;AACA;AACA;sBACc,GAAG,SAAS,MAAM,EAAE;AAClC,EAAE,MAAM,OAAO,GAAG,IAAI,CAAC;AACvB,EAAE,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,EAAE,SAAS,kBAAkB,CAAC,IAAI,EAAE,OAAO,EAAE;AACvE,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC;AACvB;AACA,IAAI,IAAI,IAAI,CAAC,aAAa,EAAE;AAC5B,MAAM,OAAO,IAAI,EAAE,CAAC;AACpB,KAAK;AACL;AACA,IAAI,MAAM,2BAA2B,GAAG,OAAO;AAC/C,SAAS,OAAO,OAAO,KAAK,QAAQ,CAAC;AACrC,SAAS,oBAAoB,IAAI,OAAO,CAAC,CAAC;AAC1C;AACA,IAAI,IAAI,cAAc,CAAC;AACvB,IAAI,IAAI,2BAA2B,EAAE;AACrC,MAAM,cAAc,GAAG,CAAC,CAAC,OAAO,CAAC,kBAAkB,CAAC;AACpD,KAAK,MAAM;AACX,MAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC;AACjE,KAAK;AACL;AACA;AACA,IAAI,IAAI,cAAc,EAAE;AACxB,MAAM,MAAM,6BAA6B,GAAG,OAAO;AACnD,WAAW,OAAO,OAAO,KAAK,QAAQ,CAAC;AACvC,WAAW,sBAAsB,IAAI,OAAO,CAAC,CAAC;AAC9C,MAAM,MAAM,eAAe,GAAG,6BAA6B;AAC3D,QAAQ,EAAE,oBAAoB,EAAE,OAAO,CAAC,oBAAoB,EAAE;AAC9D,QAAQ,IAAI,CAAC;AACb,MAAM,IAAI,CAAC,QAAQ,CAAC,eAAe,EAAE,SAAS,KAAK,EAAE;AACrD,QAAQ,OAAO,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,YAAY,EAAE,KAAK,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,SAAS,KAAK,EAAE;AAChH,UAAU,KAAK,CAAC,GAAG,GAAG,MAAM,CAAC;AAC7B,UAAU,IAAI,CAAC,KAAK,CAAC,CAAC;AACtB,SAAS,CAAC,CAAC;AACX,OAAO,CAAC,CAAC;AACT,KAAK,MAAM;AACX,MAAM,IAAI,EAAE,CAAC;AACb,KAAK;AACL,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACpB;;;;"}
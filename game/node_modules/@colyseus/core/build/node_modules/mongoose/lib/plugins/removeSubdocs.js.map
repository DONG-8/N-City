{"version":3,"file":"removeSubdocs.js","sources":["../../../../../../../node_modules/mongoose/lib/plugins/removeSubdocs.js"],"sourcesContent":["'use strict';\n\nconst each = require('../helpers/each');\n\n/*!\n * ignore\n */\n\nmodule.exports = function(schema) {\n  const unshift = true;\n  schema.s.hooks.pre('remove', false, function(next) {\n    if (this.ownerDocument) {\n      next();\n      return;\n    }\n\n    const _this = this;\n    const subdocs = this.$getAllSubdocs();\n\n    each(subdocs, function(subdoc, cb) {\n      subdoc.$__remove(cb);\n    }, function(error) {\n      if (error) {\n        return _this.$__schema.s.hooks.execPost('remove:error', _this, [_this], { error: error }, function(error) {\n          next(error);\n        });\n      }\n      next();\n    });\n  }, null, unshift);\n};\n"],"names":[],"mappings":";;;;AAIA;AACA;AACA;AACA;iBACc,GAAG,SAAS,MAAM,EAAE;AAClC,EAAE,MAAM,OAAO,GAAG,IAAI,CAAC;AACvB,EAAE,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,EAAE,SAAS,IAAI,EAAE;AACrD,IAAI,IAAI,IAAI,CAAC,aAAa,EAAE;AAC5B,MAAM,IAAI,EAAE,CAAC;AACb,MAAM,OAAO;AACb,KAAK;AACL;AACA,IAAI,MAAM,KAAK,GAAG,IAAI,CAAC;AACvB,IAAI,MAAM,OAAO,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;AAC1C;AACA,IAAI,IAAI,CAAC,OAAO,EAAE,SAAS,MAAM,EAAE,EAAE,EAAE;AACvC,MAAM,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;AAC3B,KAAK,EAAE,SAAS,KAAK,EAAE;AACvB,MAAM,IAAI,KAAK,EAAE;AACjB,QAAQ,OAAO,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,cAAc,EAAE,KAAK,EAAE,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,SAAS,KAAK,EAAE;AAClH,UAAU,IAAI,CAAC,KAAK,CAAC,CAAC;AACtB,SAAS,CAAC,CAAC;AACX,OAAO;AACP,MAAM,IAAI,EAAE,CAAC;AACb,KAAK,CAAC,CAAC;AACP,GAAG,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;AACpB;;;;"}
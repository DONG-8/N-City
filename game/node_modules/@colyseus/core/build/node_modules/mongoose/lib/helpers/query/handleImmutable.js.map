{"version":3,"file":"handleImmutable.js","sources":["../../../../../../../../node_modules/mongoose/lib/helpers/query/handleImmutable.js"],"sourcesContent":["'use strict';\n\nconst StrictModeError = require('../../error/strict');\n\nmodule.exports = function handleImmutable(schematype, strict, obj, key, fullPath, ctx) {\n  if (schematype == null || !schematype.options || !schematype.options.immutable) {\n    return false;\n  }\n  let immutable = schematype.options.immutable;\n\n  if (typeof immutable === 'function') {\n    immutable = immutable.call(ctx, ctx);\n  }\n  if (!immutable) {\n    return false;\n  }\n\n  if (strict === false) {\n    return false;\n  }\n  if (strict === 'throw') {\n    throw new StrictModeError(null,\n      `Field ${fullPath} is immutable and strict = 'throw'`);\n  }\n\n  delete obj[key];\n  return true;\n};\n"],"names":["strict","StrictModeError"],"mappings":";;;;mBAIc,GAAG,SAAS,eAAe,CAAC,UAAU,EAAEA,QAAM,EAAE,GAAG,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE;AACvF,EAAE,IAAI,UAAU,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,EAAE;AAClF,IAAI,OAAO,KAAK,CAAC;AACjB,GAAG;AACH,EAAE,IAAI,SAAS,GAAG,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC;AAC/C;AACA,EAAE,IAAI,OAAO,SAAS,KAAK,UAAU,EAAE;AACvC,IAAI,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACzC,GAAG;AACH,EAAE,IAAI,CAAC,SAAS,EAAE;AAClB,IAAI,OAAO,KAAK,CAAC;AACjB,GAAG;AACH;AACA,EAAE,IAAIA,QAAM,KAAK,KAAK,EAAE;AACxB,IAAI,OAAO,KAAK,CAAC;AACjB,GAAG;AACH,EAAE,IAAIA,QAAM,KAAK,OAAO,EAAE;AAC1B,IAAI,MAAM,IAAIC,MAAe,CAAC,IAAI;AAClC,MAAM,CAAC,MAAM,EAAE,QAAQ,CAAC,kCAAkC,CAAC,CAAC,CAAC;AAC7D,GAAG;AACH;AACA,EAAE,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC;AAClB,EAAE,OAAO,IAAI,CAAC;AACd;;;;"}
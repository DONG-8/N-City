{"version":3,"file":"removeDeselectedForeignField.mjs","sources":["../../../../../../../../node_modules/mongoose/lib/helpers/populate/removeDeselectedForeignField.js"],"sourcesContent":["'use strict';\n\nconst get = require('../get');\nconst mpath = require('mpath');\nconst parseProjection = require('../projection/parseProjection');\n\n/*!\n * ignore\n */\n\nmodule.exports = function removeDeselectedForeignField(foreignFields, options, docs) {\n  const projection = parseProjection(get(options, 'select', null), true) ||\n    parseProjection(get(options, 'options.select', null), true);\n\n  if (projection == null) {\n    return;\n  }\n  for (const foreignField of foreignFields) {\n    if (!projection.hasOwnProperty('-' + foreignField)) {\n      continue;\n    }\n\n    for (const val of docs) {\n      if (val.$__ != null) {\n        mpath.unset(foreignField, val._doc);\n      } else {\n        mpath.unset(foreignField, val);\n      }\n    }\n  }\n};"],"names":[],"mappings":";;;;AAMA;AACA;AACA;AACA;gCACc,GAAG,SAAS,4BAA4B,CAAC,aAAa,EAAE,OAAO,EAAE,IAAI,EAAE;AACrF,EAAE,MAAM,UAAU,GAAG,eAAe,CAAC,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC;AACxE,IAAI,eAAe,CAAC,GAAG,CAAC,OAAO,EAAE,gBAAgB,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC;AAChE;AACA,EAAE,IAAI,UAAU,IAAI,IAAI,EAAE;AAC1B,IAAI,OAAO;AACX,GAAG;AACH,EAAE,KAAK,MAAM,YAAY,IAAI,aAAa,EAAE;AAC5C,IAAI,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,GAAG,GAAG,YAAY,CAAC,EAAE;AACxD,MAAM,SAAS;AACf,KAAK;AACL;AACA,IAAI,KAAK,MAAM,GAAG,IAAI,IAAI,EAAE;AAC5B,MAAM,IAAI,GAAG,CAAC,GAAG,IAAI,IAAI,EAAE;AAC3B,QAAQ,KAAK,CAAC,KAAK,CAAC,YAAY,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;AAC5C,OAAO,MAAM;AACb,QAAQ,KAAK,CAAC,KAAK,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;AACvC,OAAO;AACP,KAAK;AACL,GAAG;AACH;;;;"}
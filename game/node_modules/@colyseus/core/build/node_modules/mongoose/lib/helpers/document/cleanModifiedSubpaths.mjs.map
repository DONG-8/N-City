{"version":3,"file":"cleanModifiedSubpaths.mjs","sources":["../../../../../../../../node_modules/mongoose/lib/helpers/document/cleanModifiedSubpaths.js"],"sourcesContent":["'use strict';\n\n/*!\n * ignore\n */\n\nmodule.exports = function cleanModifiedSubpaths(doc, path, options) {\n  options = options || {};\n  const skipDocArrays = options.skipDocArrays;\n\n  let deleted = 0;\n  if (!doc) {\n    return deleted;\n  }\n  for (const modifiedPath of Object.keys(doc.$__.activePaths.states.modify)) {\n    if (skipDocArrays) {\n      const schemaType = doc.$__schema.path(modifiedPath);\n      if (schemaType && schemaType.$isMongooseDocumentArray) {\n        continue;\n      }\n    }\n    if (modifiedPath.startsWith(path + '.')) {\n      delete doc.$__.activePaths.states.modify[modifiedPath];\n      ++deleted;\n    }\n  }\n  return deleted;\n};\n"],"names":[],"mappings":"AAEA;AACA;AACA;AACA;yBACc,GAAG,SAAS,qBAAqB,CAAC,GAAG,EAAE,IAAI,EAAE,OAAO,EAAE;AACpE,EAAE,OAAO,GAAG,OAAO,IAAI,EAAE,CAAC;AAC1B,EAAE,MAAM,aAAa,GAAG,OAAO,CAAC,aAAa,CAAC;AAC9C;AACA,EAAE,IAAI,OAAO,GAAG,CAAC,CAAC;AAClB,EAAE,IAAI,CAAC,GAAG,EAAE;AACZ,IAAI,OAAO,OAAO,CAAC;AACnB,GAAG;AACH,EAAE,KAAK,MAAM,YAAY,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;AAC7E,IAAI,IAAI,aAAa,EAAE;AACvB,MAAM,MAAM,UAAU,GAAG,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC1D,MAAM,IAAI,UAAU,IAAI,UAAU,CAAC,wBAAwB,EAAE;AAC7D,QAAQ,SAAS;AACjB,OAAO;AACP,KAAK;AACL,IAAI,IAAI,YAAY,CAAC,UAAU,CAAC,IAAI,GAAG,GAAG,CAAC,EAAE;AAC7C,MAAM,OAAO,GAAG,CAAC,GAAG,CAAC,WAAW,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;AAC7D,MAAM,EAAE,OAAO,CAAC;AAChB,KAAK;AACL,GAAG;AACH,EAAE,OAAO,OAAO,CAAC;AACjB;;;;"}
'use strict';

var cast = require('../../error/cast.js');
var boolean = require('../../cast/boolean.js');
var string = require('../../cast/string.js');

/*!
 * Casts val to an object suitable for `$text`. Throws an error if the object
 * can't be casted.
 *
 * @param {Any} val value to cast
 * @param {String} [path] path to associate with any errors that occured
 * @return {Object} casted object
 * @see https://docs.mongodb.com/manual/reference/operator/query/text/
 * @api private
 */

var text = function(val, path) {
  if (val == null || typeof val !== 'object') {
    throw new cast('$text', val, path);
  }

  if (val.$search != null) {
    val.$search = string(val.$search, path + '.$search');
  }
  if (val.$language != null) {
    val.$language = string(val.$language, path + '.$language');
  }
  if (val.$caseSensitive != null) {
    val.$caseSensitive = boolean(val.$caseSensitive,
      path + '.$castSensitive');
  }
  if (val.$diacriticSensitive != null) {
    val.$diacriticSensitive = boolean(val.$diacriticSensitive,
      path + '.$diacriticSensitive');
  }

  return val;
};

module.exports = text;
//# sourceMappingURL=text.js.map

{"version":3,"file":"documentarray.js","sources":["../../../../../../../node_modules/mongoose/lib/types/documentarray.js"],"sourcesContent":["'use strict';\n\n/*!\n * Module dependencies.\n */\n\nconst CoreMongooseArray = require('./core_array');\nconst Document = require('../document');\nconst ObjectId = require('./objectid');\nconst castObjectId = require('../cast/objectid');\nconst getDiscriminatorByValue = require('../helpers/discriminator/getDiscriminatorByValue');\nconst internalToObjectOptions = require('../options').internalToObjectOptions;\nconst util = require('util');\nconst utils = require('../utils');\n\nconst arrayAtomicsSymbol = require('../helpers/symbols').arrayAtomicsSymbol;\nconst arrayParentSymbol = require('../helpers/symbols').arrayParentSymbol;\nconst arrayPathSymbol = require('../helpers/symbols').arrayPathSymbol;\nconst arraySchemaSymbol = require('../helpers/symbols').arraySchemaSymbol;\nconst documentArrayParent = require('../helpers/symbols').documentArrayParent;\n\nconst _basePush = Array.prototype.push;\n\nclass CoreDocumentArray extends CoreMongooseArray {\n  get isMongooseDocumentArray() {\n    return true;\n  }\n\n  /*!\n   * ignore\n   */\n\n  toBSON() {\n    return this.toObject(internalToObjectOptions);\n  }\n\n  /*!\n   * ignore\n   */\n\n  map() {\n    const ret = super.map.apply(this, arguments);\n    ret[arraySchemaSymbol] = null;\n    ret[arrayPathSymbol] = null;\n    ret[arrayParentSymbol] = null;\n\n    return ret;\n  }\n\n  /**\n   * Overrides MongooseArray#cast\n   *\n   * @method _cast\n   * @api private\n   * @receiver MongooseDocumentArray\n   */\n\n  _cast(value, index) {\n    if (this[arraySchemaSymbol] == null) {\n      return value;\n    }\n    let Constructor = this[arraySchemaSymbol].casterConstructor;\n    const isInstance = Constructor.$isMongooseDocumentArray ?\n      value && value.isMongooseDocumentArray :\n      value instanceof Constructor;\n    if (isInstance ||\n        // Hack re: #5001, see #5005\n        (value && value.constructor && value.constructor.baseCasterConstructor === Constructor)) {\n      if (!(value[documentArrayParent] && value.__parentArray)) {\n        // value may have been created using array.create()\n        value[documentArrayParent] = this[arrayParentSymbol];\n        value.__parentArray = this;\n      }\n      value.$setIndex(index);\n      return value;\n    }\n\n    if (value === undefined || value === null) {\n      return null;\n    }\n\n    // handle cast('string') or cast(ObjectId) etc.\n    // only objects are permitted so we can safely assume that\n    // non-objects are to be interpreted as _id\n    if (Buffer.isBuffer(value) ||\n        value instanceof ObjectId || !utils.isObject(value)) {\n      value = { _id: value };\n    }\n\n    if (value &&\n        Constructor.discriminators &&\n        Constructor.schema &&\n        Constructor.schema.options &&\n        Constructor.schema.options.discriminatorKey) {\n      if (typeof value[Constructor.schema.options.discriminatorKey] === 'string' &&\n          Constructor.discriminators[value[Constructor.schema.options.discriminatorKey]]) {\n        Constructor = Constructor.discriminators[value[Constructor.schema.options.discriminatorKey]];\n      } else {\n        const constructorByValue = getDiscriminatorByValue(Constructor.discriminators, value[Constructor.schema.options.discriminatorKey]);\n        if (constructorByValue) {\n          Constructor = constructorByValue;\n        }\n      }\n    }\n\n    if (Constructor.$isMongooseDocumentArray) {\n      return Constructor.cast(value, this, undefined, undefined, index);\n    }\n    return new Constructor(value, this, undefined, undefined, index);\n  }\n\n  /**\n   * Searches array items for the first document with a matching _id.\n   *\n   * ####Example:\n   *\n   *     const embeddedDoc = m.array.id(some_id);\n   *\n   * @return {EmbeddedDocument|null} the subdocument or null if not found.\n   * @param {ObjectId|String|Number|Buffer} id\n   * @TODO cast to the _id based on schema for proper comparison\n   * @method id\n   * @api public\n   * @receiver MongooseDocumentArray\n   */\n\n  id(id) {\n    let casted;\n    let sid;\n    let _id;\n\n    try {\n      casted = castObjectId(id).toString();\n    } catch (e) {\n      casted = null;\n    }\n\n    for (const val of this) {\n      if (!val) {\n        continue;\n      }\n\n      _id = val.get('_id');\n\n      if (_id === null || typeof _id === 'undefined') {\n        continue;\n      } else if (_id instanceof Document) {\n        sid || (sid = String(id));\n        if (sid == _id._id) {\n          return val;\n        }\n      } else if (!(id instanceof ObjectId) && !(_id instanceof ObjectId)) {\n        if (id == _id || utils.deepEqual(id, _id)) {\n          return val;\n        }\n      } else if (casted == _id) {\n        return val;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns a native js Array of plain js objects\n   *\n   * ####NOTE:\n   *\n   * _Each sub-document is converted to a plain object by calling its `#toObject` method._\n   *\n   * @param {Object} [options] optional options to pass to each documents `toObject` method call during conversion\n   * @return {Array}\n   * @method toObject\n   * @api public\n   * @receiver MongooseDocumentArray\n   */\n\n  toObject(options) {\n    // `[].concat` coerces the return value into a vanilla JS array, rather\n    // than a Mongoose array.\n    return [].concat(this.map(function(doc) {\n      if (doc == null) {\n        return null;\n      }\n      if (typeof doc.toObject !== 'function') {\n        return doc;\n      }\n      return doc.toObject(options);\n    }));\n  }\n\n  slice() {\n    const arr = super.slice.apply(this, arguments);\n    arr[arrayParentSymbol] = this[arrayParentSymbol];\n    arr[arrayPathSymbol] = this[arrayPathSymbol];\n\n    return arr;\n  }\n\n  /**\n   * Wraps [`Array#push`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push) with proper change tracking.\n   *\n   * @param {Object} [args...]\n   * @api public\n   * @method push\n   * @memberOf MongooseDocumentArray\n   */\n\n  push() {\n    const ret = super.push.apply(this, arguments);\n\n    _updateParentPopulated(this);\n\n    return ret;\n  }\n\n  /**\n   * Pulls items from the array atomically.\n   *\n   * @param {Object} [args...]\n   * @api public\n   * @method pull\n   * @memberOf MongooseDocumentArray\n   */\n\n  pull() {\n    const ret = super.pull.apply(this, arguments);\n\n    _updateParentPopulated(this);\n\n    return ret;\n  }\n\n  /**\n   * Wraps [`Array#shift`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/unshift) with proper change tracking.\n   */\n\n  shift() {\n    const ret = super.shift.apply(this, arguments);\n\n    _updateParentPopulated(this);\n\n    return ret;\n  }\n\n  /**\n   * Wraps [`Array#splice`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice) with proper change tracking and casting.\n   */\n\n  splice() {\n    const ret = super.splice.apply(this, arguments);\n\n    _updateParentPopulated(this);\n\n    return ret;\n  }\n\n  /**\n   * Helper for console.log\n   *\n   * @method inspect\n   * @api public\n   * @receiver MongooseDocumentArray\n   */\n\n  inspect() {\n    return this.toObject();\n  }\n\n  /**\n   * Creates a subdocument casted to this schema.\n   *\n   * This is the same subdocument constructor used for casting.\n   *\n   * @param {Object} obj the value to cast to this arrays SubDocument schema\n   * @method create\n   * @api public\n   * @receiver MongooseDocumentArray\n   */\n\n  create(obj) {\n    let Constructor = this[arraySchemaSymbol].casterConstructor;\n    if (obj &&\n        Constructor.discriminators &&\n        Constructor.schema &&\n        Constructor.schema.options &&\n        Constructor.schema.options.discriminatorKey) {\n      if (typeof obj[Constructor.schema.options.discriminatorKey] === 'string' &&\n          Constructor.discriminators[obj[Constructor.schema.options.discriminatorKey]]) {\n        Constructor = Constructor.discriminators[obj[Constructor.schema.options.discriminatorKey]];\n      } else {\n        const constructorByValue = getDiscriminatorByValue(Constructor.discriminators, obj[Constructor.schema.options.discriminatorKey]);\n        if (constructorByValue) {\n          Constructor = constructorByValue;\n        }\n      }\n    }\n\n    return new Constructor(obj, this);\n  }\n\n  /*!\n   * ignore\n   */\n\n  notify(event) {\n    const _this = this;\n    return function notify(val, _arr) {\n      _arr = _arr || _this;\n      let i = _arr.length;\n      while (i--) {\n        if (_arr[i] == null) {\n          continue;\n        }\n        switch (event) {\n          // only swap for save event for now, we may change this to all event types later\n          case 'save':\n            val = _this[i];\n            break;\n          default:\n            // NO-OP\n            break;\n        }\n\n        if (_arr[i].isMongooseArray) {\n          notify(val, _arr[i]);\n        } else if (_arr[i]) {\n          _arr[i].emit(event, val);\n        }\n      }\n    };\n  }\n\n  _markModified(elem, embeddedPath) {\n    const parent = this[arrayParentSymbol];\n    let dirtyPath;\n\n    if (parent) {\n      dirtyPath = this[arrayPathSymbol];\n\n      if (arguments.length) {\n        if (embeddedPath != null) {\n          // an embedded doc bubbled up the change\n          const index = elem.__index;\n          dirtyPath = dirtyPath + '.' + index + '.' + embeddedPath;\n        } else {\n          // directly set an index\n          dirtyPath = dirtyPath + '.' + elem;\n        }\n      }\n\n      if (dirtyPath != null && dirtyPath.endsWith('.$')) {\n        return this;\n      }\n\n      parent.markModified(dirtyPath, arguments.length > 0 ? elem : parent);\n    }\n\n    return this;\n  }\n}\n\nif (util.inspect.custom) {\n  CoreDocumentArray.prototype[util.inspect.custom] =\n    CoreDocumentArray.prototype.inspect;\n}\n\n/*!\n * If this is a document array, each element may contain single\n * populated paths, so we need to modify the top-level document's\n * populated cache. See gh-8247, gh-8265.\n */\n\nfunction _updateParentPopulated(arr) {\n  const parent = arr[arrayParentSymbol];\n  if (!parent || parent.$__.populated == null) return;\n\n  const populatedPaths = Object.keys(parent.$__.populated).\n    filter(p => p.startsWith(arr[arrayPathSymbol] + '.'));\n\n  for (const path of populatedPaths) {\n    const remnant = path.slice((arr[arrayPathSymbol] + '.').length);\n    if (!Array.isArray(parent.$__.populated[path].value)) {\n      continue;\n    }\n\n    parent.$__.populated[path].value = arr.map(val => val.populated(remnant));\n  }\n}\n\n/**\n * DocumentArray constructor\n *\n * @param {Array} values\n * @param {String} path the path to this array\n * @param {Document} doc parent document\n * @api private\n * @return {MongooseDocumentArray}\n * @inherits MongooseArray\n * @see http://bit.ly/f6CnZU\n */\n\nfunction MongooseDocumentArray(values, path, doc) {\n  // TODO: replace this with `new CoreDocumentArray().concat()` when we remove\n  // support for node 4.x and 5.x, see https://i.imgur.com/UAAHk4S.png\n  const arr = new CoreDocumentArray();\n\n  arr[arrayAtomicsSymbol] = {};\n  arr[arraySchemaSymbol] = void 0;\n  if (Array.isArray(values)) {\n    if (values[arrayPathSymbol] === path &&\n        values[arrayParentSymbol] === doc) {\n      arr[arrayAtomicsSymbol] = Object.assign({}, values[arrayAtomicsSymbol]);\n    }\n    values.forEach(v => {\n      _basePush.call(arr, v);\n    });\n  }\n  arr[arrayPathSymbol] = path;\n\n  // Because doc comes from the context of another function, doc === global\n  // can happen if there was a null somewhere up the chain (see #3020 && #3034)\n  // RB Jun 17, 2015 updated to check for presence of expected paths instead\n  // to make more proof against unusual node environments\n  if (doc && doc instanceof Document) {\n    arr[arrayParentSymbol] = doc;\n    arr[arraySchemaSymbol] = doc.schema.path(path);\n\n    // `schema.path()` doesn't drill into nested arrays properly yet, see\n    // gh-6398, gh-6602. This is a workaround because nested arrays are\n    // always plain non-document arrays, so once you get to a document array\n    // nesting is done. Matryoshka code.\n    while (arr != null &&\n        arr[arraySchemaSymbol] != null &&\n        arr[arraySchemaSymbol].$isMongooseArray &&\n        !arr[arraySchemaSymbol].$isMongooseDocumentArray) {\n      arr[arraySchemaSymbol] = arr[arraySchemaSymbol].casterConstructor;\n    }\n  }\n\n  return arr;\n}\n\n/*!\n * Module exports.\n */\n\nmodule.exports = MongooseDocumentArray;\n"],"names":["require$$0","require$$1","CoreMongooseArray","ObjectId","castObjectId","Document","util"],"mappings":"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"}
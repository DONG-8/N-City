{"version":3,"file":"query.mjs","sources":["../../../../../../../../node_modules/mongodb/lib/core/wireprotocol/query.js"],"sourcesContent":["'use strict';\n\nconst Query = require('../connection/commands').Query;\nconst MongoError = require('../error').MongoError;\nconst getReadPreference = require('./shared').getReadPreference;\nconst collectionNamespace = require('./shared').collectionNamespace;\nconst isSharded = require('./shared').isSharded;\nconst maxWireVersion = require('../utils').maxWireVersion;\nconst applyCommonQueryOptions = require('./shared').applyCommonQueryOptions;\nconst command = require('./command');\nconst decorateWithExplain = require('../../utils').decorateWithExplain;\nconst Explain = require('../../explain').Explain;\n\nfunction query(server, ns, cmd, cursorState, options, callback) {\n  options = options || {};\n  if (cursorState.cursorId != null) {\n    return callback();\n  }\n\n  if (cmd == null) {\n    return callback(new MongoError(`command ${JSON.stringify(cmd)} does not return a cursor`));\n  }\n\n  if (maxWireVersion(server) < 4) {\n    const query = prepareLegacyFindQuery(server, ns, cmd, cursorState, options);\n    const queryOptions = applyCommonQueryOptions({}, cursorState);\n    if (typeof query.documentsReturnedIn === 'string') {\n      queryOptions.documentsReturnedIn = query.documentsReturnedIn;\n    }\n\n    server.s.pool.write(query, queryOptions, callback);\n    return;\n  }\n\n  const readPreference = getReadPreference(cmd, options);\n  let findCmd = prepareFindCommand(server, ns, cmd, cursorState, options);\n\n  // If we have explain, we need to rewrite the find command\n  // to wrap it in the explain command\n  const explain = Explain.fromOptions(options);\n  if (explain) {\n    findCmd = decorateWithExplain(findCmd, explain);\n  }\n\n  // NOTE: This actually modifies the passed in cmd, and our code _depends_ on this\n  //       side-effect. Change this ASAP\n  cmd.virtual = false;\n\n  const commandOptions = Object.assign(\n    {\n      documentsReturnedIn: 'firstBatch',\n      numberToReturn: 1,\n      slaveOk: readPreference.slaveOk()\n    },\n    options\n  );\n\n  if (cmd.readPreference) {\n    commandOptions.readPreference = readPreference;\n  }\n\n  if (cursorState.session) {\n    commandOptions.session = cursorState.session;\n  }\n\n  command(server, ns, findCmd, commandOptions, callback);\n}\n\nfunction prepareFindCommand(server, ns, cmd, cursorState) {\n  cursorState.batchSize = cmd.batchSize || cursorState.batchSize;\n  const findCmd = {\n    find: collectionNamespace(ns)\n  };\n\n  if (cmd.query) {\n    if (cmd.query['$query']) {\n      findCmd.filter = cmd.query['$query'];\n    } else {\n      findCmd.filter = cmd.query;\n    }\n  }\n\n  let sortValue = cmd.sort;\n  if (Array.isArray(sortValue)) {\n    const sortObject = {};\n\n    if (sortValue.length > 0 && !Array.isArray(sortValue[0])) {\n      let sortDirection = sortValue[1];\n      if (sortDirection === 'asc') {\n        sortDirection = 1;\n      } else if (sortDirection === 'desc') {\n        sortDirection = -1;\n      }\n\n      sortObject[sortValue[0]] = sortDirection;\n    } else {\n      for (let i = 0; i < sortValue.length; i++) {\n        let sortDirection = sortValue[i][1];\n        if (sortDirection === 'asc') {\n          sortDirection = 1;\n        } else if (sortDirection === 'desc') {\n          sortDirection = -1;\n        }\n\n        sortObject[sortValue[i][0]] = sortDirection;\n      }\n    }\n\n    sortValue = sortObject;\n  }\n\n  if (typeof cmd.allowDiskUse === 'boolean') {\n    findCmd.allowDiskUse = cmd.allowDiskUse;\n  }\n\n  if (cmd.sort) findCmd.sort = sortValue;\n  if (cmd.fields) findCmd.projection = cmd.fields;\n  if (cmd.hint) findCmd.hint = cmd.hint;\n  if (cmd.skip) findCmd.skip = cmd.skip;\n  if (cmd.limit) findCmd.limit = cmd.limit;\n  if (cmd.limit < 0) {\n    findCmd.limit = Math.abs(cmd.limit);\n    findCmd.singleBatch = true;\n  }\n\n  if (typeof cmd.batchSize === 'number') {\n    if (cmd.batchSize < 0) {\n      if (cmd.limit !== 0 && Math.abs(cmd.batchSize) < Math.abs(cmd.limit)) {\n        findCmd.limit = Math.abs(cmd.batchSize);\n      }\n\n      findCmd.singleBatch = true;\n    }\n\n    findCmd.batchSize = Math.abs(cmd.batchSize);\n  }\n\n  if (cmd.comment) findCmd.comment = cmd.comment;\n  if (cmd.maxScan) findCmd.maxScan = cmd.maxScan;\n  if (cmd.maxTimeMS) findCmd.maxTimeMS = cmd.maxTimeMS;\n  if (cmd.min) findCmd.min = cmd.min;\n  if (cmd.max) findCmd.max = cmd.max;\n  findCmd.returnKey = cmd.returnKey ? cmd.returnKey : false;\n  findCmd.showRecordId = cmd.showDiskLoc ? cmd.showDiskLoc : false;\n  if (cmd.snapshot) findCmd.snapshot = cmd.snapshot;\n  if (cmd.tailable) findCmd.tailable = cmd.tailable;\n  if (cmd.oplogReplay) findCmd.oplogReplay = cmd.oplogReplay;\n  if (cmd.noCursorTimeout) findCmd.noCursorTimeout = cmd.noCursorTimeout;\n  if (cmd.awaitData) findCmd.awaitData = cmd.awaitData;\n  if (cmd.awaitdata) findCmd.awaitData = cmd.awaitdata;\n  if (cmd.partial) findCmd.partial = cmd.partial;\n  if (cmd.collation) findCmd.collation = cmd.collation;\n  if (cmd.readConcern) findCmd.readConcern = cmd.readConcern;\n\n  return findCmd;\n}\n\nfunction prepareLegacyFindQuery(server, ns, cmd, cursorState, options) {\n  options = options || {};\n  const bson = server.s.bson;\n  const readPreference = getReadPreference(cmd, options);\n  cursorState.batchSize = cmd.batchSize || cursorState.batchSize;\n\n  let numberToReturn = 0;\n  if (\n    cursorState.limit < 0 ||\n    (cursorState.limit !== 0 && cursorState.limit < cursorState.batchSize) ||\n    (cursorState.limit > 0 && cursorState.batchSize === 0)\n  ) {\n    numberToReturn = cursorState.limit;\n  } else {\n    numberToReturn = cursorState.batchSize;\n  }\n\n  const numberToSkip = cursorState.skip || 0;\n\n  const findCmd = {};\n  if (isSharded(server) && readPreference) {\n    findCmd['$readPreference'] = readPreference.toJSON();\n  }\n\n  if (cmd.sort) findCmd['$orderby'] = cmd.sort;\n  if (cmd.hint) findCmd['$hint'] = cmd.hint;\n  if (cmd.snapshot) findCmd['$snapshot'] = cmd.snapshot;\n  if (typeof cmd.returnKey !== 'undefined') findCmd['$returnKey'] = cmd.returnKey;\n  if (cmd.maxScan) findCmd['$maxScan'] = cmd.maxScan;\n  if (cmd.min) findCmd['$min'] = cmd.min;\n  if (cmd.max) findCmd['$max'] = cmd.max;\n  if (typeof cmd.showDiskLoc !== 'undefined') findCmd['$showDiskLoc'] = cmd.showDiskLoc;\n  if (cmd.comment) findCmd['$comment'] = cmd.comment;\n  if (cmd.maxTimeMS) findCmd['$maxTimeMS'] = cmd.maxTimeMS;\n  if (options.explain !== undefined) {\n    // nToReturn must be 0 (match all) or negative (match N and close cursor)\n    // nToReturn > 0 will give explain results equivalent to limit(0)\n    numberToReturn = -Math.abs(cmd.limit || 0);\n    findCmd['$explain'] = true;\n  }\n\n  findCmd['$query'] = cmd.query;\n  if (cmd.readConcern && cmd.readConcern.level !== 'local') {\n    throw new MongoError(\n      `server find command does not support a readConcern level of ${cmd.readConcern.level}`\n    );\n  }\n\n  if (cmd.readConcern) {\n    cmd = Object.assign({}, cmd);\n    delete cmd['readConcern'];\n  }\n\n  const serializeFunctions =\n    typeof options.serializeFunctions === 'boolean' ? options.serializeFunctions : false;\n  const ignoreUndefined =\n    typeof options.ignoreUndefined === 'boolean' ? options.ignoreUndefined : false;\n\n  const query = new Query(bson, ns, findCmd, {\n    numberToSkip: numberToSkip,\n    numberToReturn: numberToReturn,\n    pre32Limit: typeof cmd.limit !== 'undefined' ? cmd.limit : undefined,\n    checkKeys: false,\n    returnFieldSelector: cmd.fields,\n    serializeFunctions: serializeFunctions,\n    ignoreUndefined: ignoreUndefined\n  });\n\n  if (typeof cmd.tailable === 'boolean') query.tailable = cmd.tailable;\n  if (typeof cmd.oplogReplay === 'boolean') query.oplogReplay = cmd.oplogReplay;\n  if (typeof cmd.noCursorTimeout === 'boolean') query.noCursorTimeout = cmd.noCursorTimeout;\n  if (typeof cmd.awaitData === 'boolean') query.awaitData = cmd.awaitData;\n  if (typeof cmd.partial === 'boolean') query.partial = cmd.partial;\n\n  query.slaveOk = readPreference.slaveOk();\n  return query;\n}\n\nmodule.exports = query;\n"],"names":["require$$0","require$$1","require$$2","require$$3","require$$4","require$$5","command"],"mappings":"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"}
{"version":3,"file":"write_concern.js","sources":["../../../../../../node_modules/mongodb/lib/write_concern.js"],"sourcesContent":["'use strict';\n\nconst kWriteConcernKeys = new Set(['w', 'wtimeout', 'j', 'journal', 'fsync']);\nlet utils;\n\n/**\n * The **WriteConcern** class is a class that represents a MongoDB WriteConcern.\n * @class\n * @property {(number|string)} w The write concern\n * @property {number} wtimeout The write concern timeout\n * @property {boolean} j The journal write concern\n * @property {boolean} fsync The file sync write concern\n * @see https://docs.mongodb.com/manual/reference/write-concern/index.html\n */\nclass WriteConcern {\n  /**\n   * Constructs a WriteConcern from the write concern properties.\n   * @param {(number|string)} [w] The write concern\n   * @param {number} [wtimeout] The write concern timeout\n   * @param {boolean} [j] The journal write concern\n   * @param {boolean} [fsync] The file sync write concern\n   */\n  constructor(w, wtimeout, j, fsync) {\n    if (w != null) {\n      this.w = w;\n    }\n    if (wtimeout != null) {\n      this.wtimeout = wtimeout;\n    }\n    if (j != null) {\n      this.j = j;\n    }\n    if (fsync != null) {\n      this.fsync = fsync;\n    }\n  }\n\n  /**\n   * Construct a WriteConcern given an options object.\n   *\n   * @param {object} [options] The options object from which to extract the write concern.\n   * @param {(number|string)} [options.w] **Deprecated** Use `options.writeConcern` instead\n   * @param {number} [options.wtimeout] **Deprecated** Use `options.writeConcern` instead\n   * @param {boolean} [options.j] **Deprecated** Use `options.writeConcern` instead\n   * @param {boolean} [options.fsync] **Deprecated** Use `options.writeConcern` instead\n   * @param {object|WriteConcern} [options.writeConcern] Specify write concern settings.\n   * @return {WriteConcern}\n   */\n  static fromOptions(options) {\n    if (\n      options == null ||\n      (options.writeConcern == null &&\n        options.w == null &&\n        options.wtimeout == null &&\n        options.j == null &&\n        options.journal == null &&\n        options.fsync == null)\n    ) {\n      return;\n    }\n\n    if (options.writeConcern) {\n      if (typeof options.writeConcern === 'string') {\n        return new WriteConcern(options.writeConcern);\n      }\n\n      if (!Object.keys(options.writeConcern).some(key => kWriteConcernKeys.has(key))) {\n        return;\n      }\n\n      return new WriteConcern(\n        options.writeConcern.w,\n        options.writeConcern.wtimeout,\n        options.writeConcern.j || options.writeConcern.journal,\n        options.writeConcern.fsync\n      );\n    }\n\n    // this is down here to prevent circular dependency\n    if (!utils) utils = require('./utils');\n\n    utils.emitWarningOnce(\n      `Top-level use of w, wtimeout, j, and fsync is deprecated. Use writeConcern instead.`\n    );\n    return new WriteConcern(\n      options.w,\n      options.wtimeout,\n      options.j || options.journal,\n      options.fsync\n    );\n  }\n}\n\nmodule.exports = WriteConcern;\n"],"names":["require$$0"],"mappings":";;;;AAEA,MAAM,iBAAiB,GAAG,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC;AAC9E,IAAI,KAAK,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY,CAAC;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,WAAW,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,KAAK,EAAE;AACrC,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;AACnB,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACjB,KAAK;AACL,IAAI,IAAI,QAAQ,IAAI,IAAI,EAAE;AAC1B,MAAM,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;AAC/B,KAAK;AACL,IAAI,IAAI,CAAC,IAAI,IAAI,EAAE;AACnB,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AACjB,KAAK;AACL,IAAI,IAAI,KAAK,IAAI,IAAI,EAAE;AACvB,MAAM,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;AACzB,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,OAAO,WAAW,CAAC,OAAO,EAAE;AAC9B,IAAI;AACJ,MAAM,OAAO,IAAI,IAAI;AACrB,OAAO,OAAO,CAAC,YAAY,IAAI,IAAI;AACnC,QAAQ,OAAO,CAAC,CAAC,IAAI,IAAI;AACzB,QAAQ,OAAO,CAAC,QAAQ,IAAI,IAAI;AAChC,QAAQ,OAAO,CAAC,CAAC,IAAI,IAAI;AACzB,QAAQ,OAAO,CAAC,OAAO,IAAI,IAAI;AAC/B,QAAQ,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC;AAC9B,MAAM;AACN,MAAM,OAAO;AACb,KAAK;AACL;AACA,IAAI,IAAI,OAAO,CAAC,YAAY,EAAE;AAC9B,MAAM,IAAI,OAAO,OAAO,CAAC,YAAY,KAAK,QAAQ,EAAE;AACpD,QAAQ,OAAO,IAAI,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AACtD,OAAO;AACP;AACA,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,GAAG,IAAI,iBAAiB,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE;AACtF,QAAQ,OAAO;AACf,OAAO;AACP;AACA,MAAM,OAAO,IAAI,YAAY;AAC7B,QAAQ,OAAO,CAAC,YAAY,CAAC,CAAC;AAC9B,QAAQ,OAAO,CAAC,YAAY,CAAC,QAAQ;AACrC,QAAQ,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO;AAC9D,QAAQ,OAAO,CAAC,YAAY,CAAC,KAAK;AAClC,OAAO,CAAC;AACR,KAAK;AACL;AACA;AACA,IAAI,IAAI,CAAC,KAAK,EAAE,KAAK,GAAGA,OAAkB,CAAC;AAC3C;AACA,IAAI,KAAK,CAAC,eAAe;AACzB,MAAM,CAAC,mFAAmF,CAAC;AAC3F,KAAK,CAAC;AACN,IAAI,OAAO,IAAI,YAAY;AAC3B,MAAM,OAAO,CAAC,CAAC;AACf,MAAM,OAAO,CAAC,QAAQ;AACtB,MAAM,OAAO,CAAC,CAAC,IAAI,OAAO,CAAC,OAAO;AAClC,MAAM,OAAO,CAAC,KAAK;AACnB,KAAK,CAAC;AACN,GAAG;AACH,CAAC;AACD;iBACc,GAAG;;;;"}
{"version":3,"file":"collections.mjs","sources":["../../../../../../../node_modules/mongodb/lib/operations/collections.js"],"sourcesContent":["'use strict';\n\nconst OperationBase = require('./operation').OperationBase;\nconst handleCallback = require('../utils').handleCallback;\n\nlet collection;\nfunction loadCollection() {\n  if (!collection) {\n    collection = require('../collection');\n  }\n  return collection;\n}\n\nclass CollectionsOperation extends OperationBase {\n  constructor(db, options) {\n    super(options);\n\n    this.db = db;\n  }\n\n  execute(callback) {\n    const db = this.db;\n    let options = this.options;\n\n    let Collection = loadCollection();\n\n    options = Object.assign({}, options, { nameOnly: true });\n    // Let's get the collection names\n    db.listCollections({}, options).toArray((err, documents) => {\n      if (err != null) return handleCallback(callback, err, null);\n      // Filter collections removing any illegal ones\n      documents = documents.filter(doc => {\n        return doc.name.indexOf('$') === -1;\n      });\n\n      // Return the collection objects\n      handleCallback(\n        callback,\n        null,\n        documents.map(d => {\n          return new Collection(\n            db,\n            db.s.topology,\n            db.databaseName,\n            d.name,\n            db.s.pkFactory,\n            db.s.options\n          );\n        })\n      );\n    });\n  }\n}\n\nmodule.exports = CollectionsOperation;\n"],"names":["require$$0","require$$1","require$$2"],"mappings":";;;;AAEA,MAAM,aAAa,GAAGA,SAAsB,CAAC,aAAa,CAAC;AAC3D,MAAM,cAAc,GAAGC,KAAmB,CAAC,cAAc,CAAC;AAC1D;AACA,IAAI,UAAU,CAAC;AACf,SAAS,cAAc,GAAG;AAC1B,EAAE,IAAI,CAAC,UAAU,EAAE;AACnB,IAAI,UAAU,GAAGC,YAAwB,CAAC;AAC1C,GAAG;AACH,EAAE,OAAO,UAAU,CAAC;AACpB,CAAC;AACD;AACA,MAAM,oBAAoB,SAAS,aAAa,CAAC;AACjD,EAAE,WAAW,CAAC,EAAE,EAAE,OAAO,EAAE;AAC3B,IAAI,KAAK,CAAC,OAAO,CAAC,CAAC;AACnB;AACA,IAAI,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;AACjB,GAAG;AACH;AACA,EAAE,OAAO,CAAC,QAAQ,EAAE;AACpB,IAAI,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AACvB,IAAI,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC/B;AACA,IAAI,IAAI,UAAU,GAAG,cAAc,EAAE,CAAC;AACtC;AACA,IAAI,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;AAC7D;AACA,IAAI,EAAE,CAAC,eAAe,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,SAAS,KAAK;AAChE,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,OAAO,cAAc,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAClE;AACA,MAAM,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC,GAAG,IAAI;AAC1C,QAAQ,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;AAC5C,OAAO,CAAC,CAAC;AACT;AACA;AACA,MAAM,cAAc;AACpB,QAAQ,QAAQ;AAChB,QAAQ,IAAI;AACZ,QAAQ,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI;AAC3B,UAAU,OAAO,IAAI,UAAU;AAC/B,YAAY,EAAE;AACd,YAAY,EAAE,CAAC,CAAC,CAAC,QAAQ;AACzB,YAAY,EAAE,CAAC,YAAY;AAC3B,YAAY,CAAC,CAAC,IAAI;AAClB,YAAY,EAAE,CAAC,CAAC,CAAC,SAAS;AAC1B,YAAY,EAAE,CAAC,CAAC,CAAC,OAAO;AACxB,WAAW,CAAC;AACZ,SAAS,CAAC;AACV,OAAO,CAAC;AACR,KAAK,CAAC,CAAC;AACP,GAAG;AACH,CAAC;AACD;eACc,GAAG;;;;"}
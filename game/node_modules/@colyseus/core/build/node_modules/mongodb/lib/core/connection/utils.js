'use strict';

var _commonjsHelpers = require('../../../../../_virtual/_commonjsHelpers.js');
var index = require('../../../../optional-require/index.js');
var index$1 = require('../../../../bson/index.js');

const require_optional = index(_commonjsHelpers.commonjsRequire);

function debugOptions(debugFields, options) {
  const finaloptions = {};
  debugFields.forEach(function(n) {
    finaloptions[n] = options[n];
  });

  return finaloptions;
}

function retrieveBSON() {
  const BSON = index$1;
  BSON.native = false;

  const optionalBSON = require_optional('bson-ext');
  if (optionalBSON) {
    optionalBSON.native = true;
    return optionalBSON;
  }

  return BSON;
}

// Throw an error if an attempt to use Snappy is made when Snappy is not installed
function noSnappyWarning() {
  throw new Error(
    'Attempted to use Snappy compression, but Snappy is not installed. Install or disable Snappy compression and try again.'
  );
}

// Facilitate loading Snappy optionally
function retrieveSnappy() {
  let snappy = require_optional('snappy');
  if (!snappy) {
    snappy = {
      compress: noSnappyWarning,
      uncompress: noSnappyWarning,
      compressSync: noSnappyWarning,
      uncompressSync: noSnappyWarning
    };
  }
  return snappy;
}

var utils = {
  debugOptions,
  retrieveBSON,
  retrieveSnappy
};

module.exports = utils;
//# sourceMappingURL=utils.js.map

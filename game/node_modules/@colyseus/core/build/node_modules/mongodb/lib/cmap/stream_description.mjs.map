{"version":3,"file":"stream_description.mjs","sources":["../../../../../../../node_modules/mongodb/lib/cmap/stream_description.js"],"sourcesContent":["'use strict';\nconst parseServerType = require('../core/sdam/server_description').parseServerType;\n\nconst RESPONSE_FIELDS = [\n  'minWireVersion',\n  'maxWireVersion',\n  'maxBsonObjectSize',\n  'maxMessageSizeBytes',\n  'maxWriteBatchSize',\n  '__nodejs_mock_server__'\n];\n\nclass StreamDescription {\n  constructor(address, options) {\n    this.address = address;\n    this.type = parseServerType(null);\n    this.minWireVersion = undefined;\n    this.maxWireVersion = undefined;\n    this.maxBsonObjectSize = 16777216;\n    this.maxMessageSizeBytes = 48000000;\n    this.maxWriteBatchSize = 100000;\n    this.compressors =\n      options && options.compression && Array.isArray(options.compression.compressors)\n        ? options.compression.compressors\n        : [];\n  }\n\n  receiveResponse(response) {\n    this.type = parseServerType(response);\n\n    RESPONSE_FIELDS.forEach(field => {\n      if (typeof response[field] !== 'undefined') {\n        this[field] = response[field];\n      }\n    });\n\n    if (response.compression) {\n      this.compressor = this.compressors.filter(c => response.compression.indexOf(c) !== -1)[0];\n    }\n  }\n}\n\nmodule.exports = {\n  StreamDescription\n};\n"],"names":["require$$0"],"mappings":";;AACA,MAAM,eAAe,GAAGA,kBAA0C,CAAC,eAAe,CAAC;AACnF;AACA,MAAM,eAAe,GAAG;AACxB,EAAE,gBAAgB;AAClB,EAAE,gBAAgB;AAClB,EAAE,mBAAmB;AACrB,EAAE,qBAAqB;AACvB,EAAE,mBAAmB;AACrB,EAAE,wBAAwB;AAC1B,CAAC,CAAC;AACF;AACA,MAAM,iBAAiB,CAAC;AACxB,EAAE,WAAW,CAAC,OAAO,EAAE,OAAO,EAAE;AAChC,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC3B,IAAI,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC,IAAI,CAAC,CAAC;AACtC,IAAI,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;AACpC,IAAI,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;AACpC,IAAI,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC;AACtC,IAAI,IAAI,CAAC,mBAAmB,GAAG,QAAQ,CAAC;AACxC,IAAI,IAAI,CAAC,iBAAiB,GAAG,MAAM,CAAC;AACpC,IAAI,IAAI,CAAC,WAAW;AACpB,MAAM,OAAO,IAAI,OAAO,CAAC,WAAW,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,WAAW,CAAC;AACtF,UAAU,OAAO,CAAC,WAAW,CAAC,WAAW;AACzC,UAAU,EAAE,CAAC;AACb,GAAG;AACH;AACA,EAAE,eAAe,CAAC,QAAQ,EAAE;AAC5B,IAAI,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC,QAAQ,CAAC,CAAC;AAC1C;AACA,IAAI,eAAe,CAAC,OAAO,CAAC,KAAK,IAAI;AACrC,MAAM,IAAI,OAAO,QAAQ,CAAC,KAAK,CAAC,KAAK,WAAW,EAAE;AAClD,QAAQ,IAAI,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;AACtC,OAAO;AACP,KAAK,CAAC,CAAC;AACP;AACA,IAAI,IAAI,QAAQ,CAAC,WAAW,EAAE;AAC9B,MAAM,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,IAAI,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChG,KAAK;AACL,GAAG;AACH,CAAC;AACD;sBACc,GAAG;AACjB,EAAE,iBAAiB;AACnB;;;;"}
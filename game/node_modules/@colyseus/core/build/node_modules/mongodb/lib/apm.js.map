{"version":3,"file":"apm.js","sources":["../../../../../../node_modules/mongodb/lib/apm.js"],"sourcesContent":["'use strict';\nconst EventEmitter = require('events').EventEmitter;\n\nclass Instrumentation extends EventEmitter {\n  constructor() {\n    super();\n  }\n\n  instrument(MongoClient, callback) {\n    // store a reference to the original functions\n    this.$MongoClient = MongoClient;\n    const $prototypeConnect = (this.$prototypeConnect = MongoClient.prototype.connect);\n\n    const instrumentation = this;\n    MongoClient.prototype.connect = function(callback) {\n      this.s.options.monitorCommands = true;\n      this.on('commandStarted', event => instrumentation.emit('started', event));\n      this.on('commandSucceeded', event => instrumentation.emit('succeeded', event));\n      this.on('commandFailed', event => instrumentation.emit('failed', event));\n      return $prototypeConnect.call(this, callback);\n    };\n\n    if (typeof callback === 'function') callback(null, this);\n  }\n\n  uninstrument() {\n    this.$MongoClient.prototype.connect = this.$prototypeConnect;\n  }\n}\n\nmodule.exports = Instrumentation;\n"],"names":["require$$0"],"mappings":";;;;;;;;AACA,MAAM,YAAY,GAAGA,8BAAiB,CAAC,YAAY,CAAC;AACpD;AACA,MAAM,eAAe,SAAS,YAAY,CAAC;AAC3C,EAAE,WAAW,GAAG;AAChB,IAAI,KAAK,EAAE,CAAC;AACZ,GAAG;AACH;AACA,EAAE,UAAU,CAAC,WAAW,EAAE,QAAQ,EAAE;AACpC;AACA,IAAI,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;AACpC,IAAI,MAAM,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,GAAG,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;AACvF;AACA,IAAI,MAAM,eAAe,GAAG,IAAI,CAAC;AACjC,IAAI,WAAW,CAAC,SAAS,CAAC,OAAO,GAAG,SAAS,QAAQ,EAAE;AACvD,MAAM,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5C,MAAM,IAAI,CAAC,EAAE,CAAC,gBAAgB,EAAE,KAAK,IAAI,eAAe,CAAC,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;AACjF,MAAM,IAAI,CAAC,EAAE,CAAC,kBAAkB,EAAE,KAAK,IAAI,eAAe,CAAC,IAAI,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC;AACrF,MAAM,IAAI,CAAC,EAAE,CAAC,eAAe,EAAE,KAAK,IAAI,eAAe,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,CAAC;AAC/E,MAAM,OAAO,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACpD,KAAK,CAAC;AACN;AACA,IAAI,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAC7D,GAAG;AACH;AACA,EAAE,YAAY,GAAG;AACjB,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC,iBAAiB,CAAC;AACjE,GAAG;AACH,CAAC;AACD;OACc,GAAG;;;;"}
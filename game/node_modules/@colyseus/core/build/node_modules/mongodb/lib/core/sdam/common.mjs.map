{"version":3,"file":"common.mjs","sources":["../../../../../../../../node_modules/mongodb/lib/core/sdam/common.js"],"sourcesContent":["'use strict';\n\n// shared state names\nconst STATE_CLOSING = 'closing';\nconst STATE_CLOSED = 'closed';\nconst STATE_CONNECTING = 'connecting';\nconst STATE_CONNECTED = 'connected';\n\n// An enumeration of topology types we know about\nconst TopologyType = {\n  Single: 'Single',\n  ReplicaSetNoPrimary: 'ReplicaSetNoPrimary',\n  ReplicaSetWithPrimary: 'ReplicaSetWithPrimary',\n  Sharded: 'Sharded',\n  Unknown: 'Unknown'\n};\n\n// An enumeration of server types we know about\nconst ServerType = {\n  Standalone: 'Standalone',\n  Mongos: 'Mongos',\n  PossiblePrimary: 'PossiblePrimary',\n  RSPrimary: 'RSPrimary',\n  RSSecondary: 'RSSecondary',\n  RSArbiter: 'RSArbiter',\n  RSOther: 'RSOther',\n  RSGhost: 'RSGhost',\n  Unknown: 'Unknown'\n};\n\n// helper to get a server's type that works for both legacy and unified topologies\nfunction serverType(server) {\n  let description = server.s.description || server.s.serverDescription;\n  if (description.topologyType === TopologyType.Single) return description.servers[0].type;\n  return description.type;\n}\n\nconst TOPOLOGY_DEFAULTS = {\n  useUnifiedTopology: true,\n  localThresholdMS: 15,\n  serverSelectionTimeoutMS: 30000,\n  heartbeatFrequencyMS: 10000,\n  minHeartbeatFrequencyMS: 500\n};\n\nfunction drainTimerQueue(queue) {\n  queue.forEach(clearTimeout);\n  queue.clear();\n}\n\nfunction clearAndRemoveTimerFrom(timer, timers) {\n  clearTimeout(timer);\n  return timers.delete(timer);\n}\n\nmodule.exports = {\n  STATE_CLOSING,\n  STATE_CLOSED,\n  STATE_CONNECTING,\n  STATE_CONNECTED,\n  TOPOLOGY_DEFAULTS,\n  TopologyType,\n  ServerType,\n  serverType,\n  drainTimerQueue,\n  clearAndRemoveTimerFrom\n};\n"],"names":[],"mappings":"AAEA;AACA,MAAM,aAAa,GAAG,SAAS,CAAC;AAChC,MAAM,YAAY,GAAG,QAAQ,CAAC;AAC9B,MAAM,gBAAgB,GAAG,YAAY,CAAC;AACtC,MAAM,eAAe,GAAG,WAAW,CAAC;AACpC;AACA;AACA,MAAM,YAAY,GAAG;AACrB,EAAE,MAAM,EAAE,QAAQ;AAClB,EAAE,mBAAmB,EAAE,qBAAqB;AAC5C,EAAE,qBAAqB,EAAE,uBAAuB;AAChD,EAAE,OAAO,EAAE,SAAS;AACpB,EAAE,OAAO,EAAE,SAAS;AACpB,CAAC,CAAC;AACF;AACA;AACA,MAAM,UAAU,GAAG;AACnB,EAAE,UAAU,EAAE,YAAY;AAC1B,EAAE,MAAM,EAAE,QAAQ;AAClB,EAAE,eAAe,EAAE,iBAAiB;AACpC,EAAE,SAAS,EAAE,WAAW;AACxB,EAAE,WAAW,EAAE,aAAa;AAC5B,EAAE,SAAS,EAAE,WAAW;AACxB,EAAE,OAAO,EAAE,SAAS;AACpB,EAAE,OAAO,EAAE,SAAS;AACpB,EAAE,OAAO,EAAE,SAAS;AACpB,CAAC,CAAC;AACF;AACA;AACA,SAAS,UAAU,CAAC,MAAM,EAAE;AAC5B,EAAE,IAAI,WAAW,GAAG,MAAM,CAAC,CAAC,CAAC,WAAW,IAAI,MAAM,CAAC,CAAC,CAAC,iBAAiB,CAAC;AACvE,EAAE,IAAI,WAAW,CAAC,YAAY,KAAK,YAAY,CAAC,MAAM,EAAE,OAAO,WAAW,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AAC3F,EAAE,OAAO,WAAW,CAAC,IAAI,CAAC;AAC1B,CAAC;AACD;AACA,MAAM,iBAAiB,GAAG;AAC1B,EAAE,kBAAkB,EAAE,IAAI;AAC1B,EAAE,gBAAgB,EAAE,EAAE;AACtB,EAAE,wBAAwB,EAAE,KAAK;AACjC,EAAE,oBAAoB,EAAE,KAAK;AAC7B,EAAE,uBAAuB,EAAE,GAAG;AAC9B,CAAC,CAAC;AACF;AACA,SAAS,eAAe,CAAC,KAAK,EAAE;AAChC,EAAE,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;AAC9B,EAAE,KAAK,CAAC,KAAK,EAAE,CAAC;AAChB,CAAC;AACD;AACA,SAAS,uBAAuB,CAAC,KAAK,EAAE,MAAM,EAAE;AAChD,EAAE,YAAY,CAAC,KAAK,CAAC,CAAC;AACtB,EAAE,OAAO,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;AAC9B,CAAC;AACD;UACc,GAAG;AACjB,EAAE,aAAa;AACf,EAAE,YAAY;AACd,EAAE,gBAAgB;AAClB,EAAE,eAAe;AACjB,EAAE,iBAAiB;AACnB,EAAE,YAAY;AACd,EAAE,UAAU;AACZ,EAAE,UAAU;AACZ,EAAE,eAAe;AACjB,EAAE,uBAAuB;AACzB;;;;"}
{"version":3,"file":"error.js","sources":["../../../../../../node_modules/mongodb/lib/error.js"],"sourcesContent":["'use strict';\n\nconst MongoNetworkError = require('./core').MongoNetworkError;\n\n// From spec@https://github.com/mongodb/specifications/blob/f93d78191f3db2898a59013a7ed5650352ef6da8/source/change-streams/change-streams.rst#resumable-error\nconst GET_MORE_RESUMABLE_CODES = new Set([\n  6, // HostUnreachable\n  7, // HostNotFound\n  89, // NetworkTimeout\n  91, // ShutdownInProgress\n  189, // PrimarySteppedDown\n  262, // ExceededTimeLimit\n  9001, // SocketException\n  10107, // NotMaster\n  11600, // InterruptedAtShutdown\n  11602, // InterruptedDueToReplStateChange\n  13435, // NotMasterNoSlaveOk\n  13436, // NotMasterOrSecondary\n  63, // StaleShardVersion\n  150, // StaleEpoch\n  13388, // StaleConfig\n  234, // RetryChangeStream\n  133, // FailedToSatisfyReadPreference\n  43 // CursorNotFound\n]);\n\nfunction isResumableError(error, wireVersion) {\n  if (error instanceof MongoNetworkError) {\n    return true;\n  }\n\n  if (wireVersion >= 9) {\n    // DRIVERS-1308: For 4.4 drivers running against 4.4 servers, drivers will add a special case to treat the CursorNotFound error code as resumable\n    if (error.code === 43) {\n      return true;\n    }\n    return error.hasErrorLabel('ResumableChangeStreamError');\n  }\n\n  return GET_MORE_RESUMABLE_CODES.has(error.code);\n}\n\nmodule.exports = { GET_MORE_RESUMABLE_CODES, isResumableError };\n"],"names":["require$$0"],"mappings":";;;;AAEA,MAAM,iBAAiB,GAAGA,KAAiB,CAAC,iBAAiB,CAAC;AAC9D;AACA;AACA,MAAM,wBAAwB,GAAG,IAAI,GAAG,CAAC;AACzC,EAAE,CAAC;AACH,EAAE,CAAC;AACH,EAAE,EAAE;AACJ,EAAE,EAAE;AACJ,EAAE,GAAG;AACL,EAAE,GAAG;AACL,EAAE,IAAI;AACN,EAAE,KAAK;AACP,EAAE,KAAK;AACP,EAAE,KAAK;AACP,EAAE,KAAK;AACP,EAAE,KAAK;AACP,EAAE,EAAE;AACJ,EAAE,GAAG;AACL,EAAE,KAAK;AACP,EAAE,GAAG;AACL,EAAE,GAAG;AACL,EAAE,EAAE;AACJ,CAAC,CAAC,CAAC;AACH;AACA,SAAS,gBAAgB,CAAC,KAAK,EAAE,WAAW,EAAE;AAC9C,EAAE,IAAI,KAAK,YAAY,iBAAiB,EAAE;AAC1C,IAAI,OAAO,IAAI,CAAC;AAChB,GAAG;AACH;AACA,EAAE,IAAI,WAAW,IAAI,CAAC,EAAE;AACxB;AACA,IAAI,IAAI,KAAK,CAAC,IAAI,KAAK,EAAE,EAAE;AAC3B,MAAM,OAAO,IAAI,CAAC;AAClB,KAAK;AACL,IAAI,OAAO,KAAK,CAAC,aAAa,CAAC,4BAA4B,CAAC,CAAC;AAC7D,GAAG;AACH;AACA,EAAE,OAAO,wBAAwB,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAClD,CAAC;AACD;SACc,GAAG,EAAE,wBAAwB,EAAE,gBAAgB;;;;"}
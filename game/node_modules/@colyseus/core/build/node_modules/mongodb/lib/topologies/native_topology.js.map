{"version":3,"file":"native_topology.js","sources":["../../../../../../../node_modules/mongodb/lib/topologies/native_topology.js"],"sourcesContent":["'use strict';\n\nconst Topology = require('../core').Topology;\nconst ServerCapabilities = require('./topology_base').ServerCapabilities;\nconst Cursor = require('../cursor');\nconst translateOptions = require('../utils').translateOptions;\n\nclass NativeTopology extends Topology {\n  constructor(servers, options) {\n    options = options || {};\n\n    let clonedOptions = Object.assign(\n      {},\n      {\n        cursorFactory: Cursor,\n        reconnect: false,\n        emitError: typeof options.emitError === 'boolean' ? options.emitError : true,\n        maxPoolSize:\n          typeof options.maxPoolSize === 'number'\n            ? options.maxPoolSize\n            : typeof options.poolSize === 'number'\n            ? options.poolSize\n            : 10,\n        minPoolSize:\n          typeof options.minPoolSize === 'number'\n            ? options.minPoolSize\n            : typeof options.minSize === 'number'\n            ? options.minSize\n            : 0,\n        monitorCommands:\n          typeof options.monitorCommands === 'boolean' ? options.monitorCommands : false\n      }\n    );\n\n    // Translate any SSL options and other connectivity options\n    clonedOptions = translateOptions(clonedOptions, options);\n\n    // Socket options\n    var socketOptions =\n      options.socketOptions && Object.keys(options.socketOptions).length > 0\n        ? options.socketOptions\n        : options;\n\n    // Translate all the options to the core types\n    clonedOptions = translateOptions(clonedOptions, socketOptions);\n\n    super(servers, clonedOptions);\n  }\n\n  capabilities() {\n    if (this.s.sCapabilities) return this.s.sCapabilities;\n    if (this.lastIsMaster() == null) return null;\n    this.s.sCapabilities = new ServerCapabilities(this.lastIsMaster());\n    return this.s.sCapabilities;\n  }\n\n  // Command\n  command(ns, cmd, options, callback) {\n    super.command(ns.toString(), cmd, options, callback);\n  }\n\n  // Insert\n  insert(ns, ops, options, callback) {\n    super.insert(ns.toString(), ops, options, callback);\n  }\n\n  // Update\n  update(ns, ops, options, callback) {\n    super.update(ns.toString(), ops, options, callback);\n  }\n\n  // Remove\n  remove(ns, ops, options, callback) {\n    super.remove(ns.toString(), ops, options, callback);\n  }\n}\n\nmodule.exports = NativeTopology;\n"],"names":["require$$0","require$$1","require$$2","Cursor"],"mappings":"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"}
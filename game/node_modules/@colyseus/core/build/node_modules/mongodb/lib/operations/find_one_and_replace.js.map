{"version":3,"file":"find_one_and_replace.js","sources":["../../../../../../../node_modules/mongodb/lib/operations/find_one_and_replace.js"],"sourcesContent":["'use strict';\n\nconst MongoError = require('../core').MongoError;\nconst FindAndModifyOperation = require('./find_and_modify');\nconst hasAtomicOperators = require('../utils').hasAtomicOperators;\n\nclass FindOneAndReplaceOperation extends FindAndModifyOperation {\n  constructor(collection, filter, replacement, options) {\n    if ('returnDocument' in options && 'returnOriginal' in options) {\n      throw new MongoError(\n        'findOneAndReplace option returnOriginal is deprecated in favor of returnDocument and cannot be combined'\n      );\n    }\n    // Final options\n    const finalOptions = Object.assign({}, options);\n    finalOptions.fields = options.projection;\n    finalOptions.update = true;\n    finalOptions.new = options.returnDocument === 'after' || options.returnOriginal === false;\n    finalOptions.upsert = options.upsert === true;\n\n    if (filter == null || typeof filter !== 'object') {\n      throw new TypeError('Filter parameter must be an object');\n    }\n\n    if (replacement == null || typeof replacement !== 'object') {\n      throw new TypeError('Replacement parameter must be an object');\n    }\n\n    if (hasAtomicOperators(replacement)) {\n      throw new TypeError('Replacement document must not contain atomic operators');\n    }\n\n    super(collection, filter, finalOptions.sort, replacement, finalOptions);\n  }\n}\n\nmodule.exports = FindOneAndReplaceOperation;\n"],"names":["require$$0","require$$1","FindAndModifyOperation"],"mappings":";;;;;;AAEA,MAAM,UAAU,GAAGA,KAAkB,CAAC,UAAU,CAAC;AACW;AAC5D,MAAM,kBAAkB,GAAGC,KAAmB,CAAC,kBAAkB,CAAC;AAClE;AACA,MAAM,0BAA0B,SAASC,eAAsB,CAAC;AAChE,EAAE,WAAW,CAAC,UAAU,EAAE,MAAM,EAAE,WAAW,EAAE,OAAO,EAAE;AACxD,IAAI,IAAI,gBAAgB,IAAI,OAAO,IAAI,gBAAgB,IAAI,OAAO,EAAE;AACpE,MAAM,MAAM,IAAI,UAAU;AAC1B,QAAQ,yGAAyG;AACjH,OAAO,CAAC;AACR,KAAK;AACL;AACA,IAAI,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;AACpD,IAAI,YAAY,CAAC,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC;AAC7C,IAAI,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;AAC/B,IAAI,YAAY,CAAC,GAAG,GAAG,OAAO,CAAC,cAAc,KAAK,OAAO,IAAI,OAAO,CAAC,cAAc,KAAK,KAAK,CAAC;AAC9F,IAAI,YAAY,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,KAAK,IAAI,CAAC;AAClD;AACA,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;AACtD,MAAM,MAAM,IAAI,SAAS,CAAC,oCAAoC,CAAC,CAAC;AAChE,KAAK;AACL;AACA,IAAI,IAAI,WAAW,IAAI,IAAI,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;AAChE,MAAM,MAAM,IAAI,SAAS,CAAC,yCAAyC,CAAC,CAAC;AACrE,KAAK;AACL;AACA,IAAI,IAAI,kBAAkB,CAAC,WAAW,CAAC,EAAE;AACzC,MAAM,MAAM,IAAI,SAAS,CAAC,wDAAwD,CAAC,CAAC;AACpF,KAAK;AACL;AACA,IAAI,KAAK,CAAC,UAAU,EAAE,MAAM,EAAE,YAAY,CAAC,IAAI,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC;AAC5E,GAAG;AACH,CAAC;AACD;wBACc,GAAG;;;;"}
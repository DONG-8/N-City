{"version":3,"file":"commands.mjs","sources":["../../../../../../node_modules/redis/lib/commands.js"],"sourcesContent":["'use strict';\n\nvar commands = require('redis-commands');\nvar Multi = require('./multi');\nvar RedisClient = require('../').RedisClient;\nvar Command = require('./command');\n// Feature detect if a function may change it's name\nvar changeFunctionName = (function () {\n    var fn = function abc () {};\n    try {\n        Object.defineProperty(fn, 'name', {\n            value: 'foobar'\n        });\n        return true;\n    } catch (e) {\n        return false;\n    }\n}());\n\nvar addCommand = function (command) {\n    // Some rare Redis commands use special characters in their command name\n    // Convert those to a underscore to prevent using invalid function names\n    var commandName = command.replace(/(?:^([0-9])|[^a-zA-Z0-9_$])/g, '_$1');\n\n    // Do not override existing functions\n    if (!RedisClient.prototype[command]) {\n        RedisClient.prototype[command.toUpperCase()] = RedisClient.prototype[command] = function () {\n            var arr;\n            var len = arguments.length;\n            var callback;\n            var i = 0;\n            if (Array.isArray(arguments[0])) {\n                arr = arguments[0];\n                if (len === 2) {\n                    callback = arguments[1];\n                }\n            } else if (len > 1 && Array.isArray(arguments[1])) {\n                if (len === 3) {\n                    callback = arguments[2];\n                }\n                len = arguments[1].length;\n                arr = new Array(len + 1);\n                arr[0] = arguments[0];\n                for (; i < len; i += 1) {\n                    arr[i + 1] = arguments[1][i];\n                }\n            } else {\n                // The later should not be the average use case\n                if (len !== 0 && (typeof arguments[len - 1] === 'function' || typeof arguments[len - 1] === 'undefined')) {\n                    len--;\n                    callback = arguments[len];\n                }\n                arr = new Array(len);\n                for (; i < len; i += 1) {\n                    arr[i] = arguments[i];\n                }\n            }\n            return this.internal_send_command(new Command(command, arr, callback));\n        };\n        // Alias special function names (e.g. NR.RUN becomes NR_RUN and nr_run)\n        if (commandName !== command) {\n            RedisClient.prototype[commandName.toUpperCase()] = RedisClient.prototype[commandName] = RedisClient.prototype[command];\n        }\n        if (changeFunctionName) {\n            Object.defineProperty(RedisClient.prototype[command], 'name', {\n                value: commandName\n            });\n        }\n    }\n\n    // Do not override existing functions\n    if (!Multi.prototype[command]) {\n        Multi.prototype[command.toUpperCase()] = Multi.prototype[command] = function () {\n            var arr;\n            var len = arguments.length;\n            var callback;\n            var i = 0;\n            if (Array.isArray(arguments[0])) {\n                arr = arguments[0];\n                if (len === 2) {\n                    callback = arguments[1];\n                }\n            } else if (len > 1 && Array.isArray(arguments[1])) {\n                if (len === 3) {\n                    callback = arguments[2];\n                }\n                len = arguments[1].length;\n                arr = new Array(len + 1);\n                arr[0] = arguments[0];\n                for (; i < len; i += 1) {\n                    arr[i + 1] = arguments[1][i];\n                }\n            } else {\n                // The later should not be the average use case\n                if (len !== 0 && (typeof arguments[len - 1] === 'function' || typeof arguments[len - 1] === 'undefined')) {\n                    len--;\n                    callback = arguments[len];\n                }\n                arr = new Array(len);\n                for (; i < len; i += 1) {\n                    arr[i] = arguments[i];\n                }\n            }\n            this.queue.push(new Command(command, arr, callback));\n            return this;\n        };\n        // Alias special function names (e.g. NR.RUN becomes NR_RUN and nr_run)\n        if (commandName !== command) {\n            Multi.prototype[commandName.toUpperCase()] = Multi.prototype[commandName] = Multi.prototype[command];\n        }\n        if (changeFunctionName) {\n            Object.defineProperty(Multi.prototype[command], 'name', {\n                value: commandName\n            });\n        }\n    }\n};\n\ncommands.list.forEach(addCommand);\n\nmodule.exports = addCommand;\n"],"names":["require$$0","command","Command","Multi","commands"],"mappings":"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"}
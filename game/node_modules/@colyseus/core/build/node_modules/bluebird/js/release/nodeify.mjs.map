{"version":3,"file":"nodeify.mjs","sources":["../../../../../../../node_modules/bluebird/js/release/nodeify.js"],"sourcesContent":["\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n"],"names":["util","require$$0"],"mappings":"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"}
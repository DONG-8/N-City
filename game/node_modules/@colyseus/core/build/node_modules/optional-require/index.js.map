{"version":3,"file":"index.js","sources":["../../../../../node_modules/optional-require/index.js"],"sourcesContent":["\"use strict\";\n\nconst assert = require(\"assert\");\n\nfunction findModuleNotFound(err, name) {\n  // Check the first line of the error message\n  const msg = err.message.split(\"\\n\")[0];\n  return msg && (\n    // Check for \"Cannot find module 'foo'\"\n    msg.includes(`'${name}'`)\n    // Check for \"Your application tried to access foo (a peer dependency) ...\" (Yarn v2 PnP)\n    // https://github.com/yarnpkg/berry/blob/e81dc0d29bb2f41818d9c5c1c74bab1406fb979b/packages/yarnpkg-pnp/sources/loader/makeApi.ts#L680\n    || msg.includes(` ${name} `)\n    // Check for \"Your application tried to access foo. While ...\" (Yarn v2 PnP)\n    // https://github.com/yarnpkg/berry/blob/e81dc0d29bb2f41818d9c5c1c74bab1406fb979b/packages/yarnpkg-pnp/sources/loader/makeApi.ts#L704\n    || msg.includes(` ${name}. `)\n    // Check for \"Your application tried to access foo, but ...\" (Yarn v2 PnP)\n    // https://github.com/yarnpkg/berry/blob/e81dc0d29bb2f41818d9c5c1c74bab1406fb979b/packages/yarnpkg-pnp/sources/loader/makeApi.ts#L718\n    || msg.includes(` ${name}, `)\n  );\n}\n\nfunction _optionalRequire(callerRequire, resolve, path, message) {\n  let opts;\n\n  if (typeof message === \"object\") {\n    opts = message;\n    assert(\n      !(opts.hasOwnProperty(\"notFound\") && opts.hasOwnProperty(\"default\")),\n      \"optionalRequire: options set with both `notFound` and `default`\"\n    );\n  } else {\n    opts = { message };\n  }\n\n  try {\n    return resolve ? callerRequire.resolve(path) : callerRequire(path);\n  } catch (e) {\n    if (e.code !== \"MODULE_NOT_FOUND\" || !findModuleNotFound(e, path)) {\n      // if the module we are requiring fail because it try to require a\n      // module that's not found, then we have to report this as failed.\n      if (typeof opts.fail === \"function\") {\n        return opts.fail(e);\n      }\n      throw e;\n    }\n\n    if (opts.message) {\n      const message = typeof opts.message === \"string\" ? `${opts.message} - ` : \"\";\n      const r = resolve ? \"resolved\" : \"found\";\n      optionalRequire.log(`${message}optional module not ${r}`, path);\n    }\n\n    if (typeof opts.notFound === \"function\") {\n      return opts.notFound(e);\n    }\n\n    return opts.default;\n  }\n}\n\nconst tryRequire = (callerRequire, path, message) => _optionalRequire(callerRequire, false, path, message);\nconst tryResolve = (callerRequire, path, message) => _optionalRequire(callerRequire, true, path, message);\n\nfunction optionalRequire(callerRequire) {\n  const x = (path, message) => tryRequire(callerRequire, path, message);\n  x.resolve = (path, message) => tryResolve(callerRequire, path, message);\n  return x;\n}\n\noptionalRequire.try = tryRequire;\noptionalRequire.tryResolve = tryResolve;\noptionalRequire.resolve = tryResolve;\noptionalRequire.log = (message, path) => console.log(`Just FYI: ${message}; Path \"${path}\"`);\nmodule.exports = optionalRequire;\n"],"names":["assert"],"mappings":"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"}